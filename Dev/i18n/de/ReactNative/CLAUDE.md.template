# CLAUDE.md - {{PROJECT_NAME}}

**Projet React Native / Expo avec TypeScript**

---

## ğŸ¯ Contexte du Projet

**Nom**: {{PROJECT_NAME}}
**Type**: Application mobile (iOS + Android)
**Stack**: {{TECH_STACK}}

### Description
{{PROJECT_DESCRIPTION}}

### Objectifs
- {{GOAL_1}}
- {{GOAL_2}}
- {{GOAL_3}}

---

## ğŸ“‹ RÃ¨gles Fondamentales

### RÃˆGLE #1: ANALYSE OBLIGATOIRE
**AVANT tout code, une phase d'analyse COMPLÃˆTE est OBLIGATOIRE.**

Voir: [01-workflow-analysis.md](./rules/01-workflow-analysis.md)

**Processus**:
1. Comprendre le besoin
2. Analyser l'architecture existante
3. Identifier les impacts
4. Concevoir la solution
5. Planifier l'implÃ©mentation
6. Valider l'approche
7. **PUIS** coder

**Ratio minimum**: 1h d'analyse = 1h de code

### RÃˆGLE #2: ARCHITECTURE FIRST
**Respecter l'architecture Ã©tablie.**

Voir: [02-architecture.md](./rules/02-architecture.md)

**Structure**:
```
src/
â”œâ”€â”€ app/                    # Expo Router (file-based routing)
â”œâ”€â”€ components/             # Composants rÃ©utilisables
â”œâ”€â”€ features/               # Features par domaine mÃ©tier
â”œâ”€â”€ hooks/                  # Custom hooks
â”œâ”€â”€ services/               # API, Storage, etc.
â”œâ”€â”€ stores/                 # State management global
â”œâ”€â”€ utils/                  # Utilitaires
â”œâ”€â”€ types/                  # Types TypeScript
â”œâ”€â”€ theme/                  # Theme (colors, spacing)
â””â”€â”€ constants/              # Constantes
```

### RÃˆGLE #3: STANDARDS DE CODE
**Code TypeScript strict, ESLint, Prettier.**

Voir: [03-coding-standards.md](./rules/03-coding-standards.md)

**Exigences**:
- TypeScript strict mode activÃ©
- ESLint: 0 errors, 0 warnings
- Prettier: Auto-format
- Named exports (sauf screens)
- JSDoc pour APIs publiques

### RÃˆGLE #4: PRINCIPES SOLID
**Appliquer SOLID, KISS, DRY, YAGNI.**

Voir: [04-solid-principles.md](./rules/04-solid-principles.md), [05-kiss-dry-yagni.md](./rules/05-kiss-dry-yagni.md)

**Principes**:
- **S**ingle Responsibility
- **O**pen/Closed
- **L**iskov Substitution
- **I**nterface Segregation
- **D**ependency Inversion

### RÃˆGLE #5: TESTS OBLIGATOIRES
**Tout code doit Ãªtre testÃ©.**

Voir: [07-testing.md](./rules/07-testing.md)

**Coverage minimum**: 80%
- Unit tests pour utils/services
- Component tests pour UI
- Integration tests pour hooks
- E2E tests pour flows critiques

### RÃˆGLE #6: SÃ‰CURITÃ‰
**La sÃ©curitÃ© n'est pas optionnelle.**

Voir: [11-security.md](./rules/11-security.md)

**Exigences**:
- Tokens dans SecureStore
- HTTPS uniquement
- Input validation (Zod)
- Pas de secrets dans code
- Dependencies audit clean

### RÃˆGLE #7: PERFORMANCE
**Target: 60 FPS sur toutes interactions.**

Voir: [12-performance.md](./rules/12-performance.md)

**Optimisations**:
- Hermes engine activÃ©
- React.memo pour composants
- FlatList optimisÃ©
- Images optimisÃ©es (expo-image)
- Animations avec native driver

---

## ğŸ›  Stack Technique

### Core
- **React Native**: {{REACT_NATIVE_VERSION}}
- **Expo SDK**: {{EXPO_SDK_VERSION}}
- **TypeScript**: {{TYPESCRIPT_VERSION}}
- **Node.js**: {{NODE_VERSION}}

### Navigation
- **Expo Router**: File-based routing

### State Management
- **React Query**: Server state
- **Zustand**: Global client state
- **MMKV**: Fast persistence

### UI/Styling
- **StyleSheet**: Styles natifs
- **Theme**: CentralisÃ©
- **Reanimated**: Animations

### Forms & Validation
- **React Hook Form**: Gestion forms
- **Zod**: Validation schemas

### Testing
- **Jest**: Tests unitaires
- **React Native Testing Library**: Tests composants
- **Detox**: Tests E2E

### Tools
- **ESLint**: Linting
- **Prettier**: Formatting
- **Husky**: Git hooks

---

## ğŸ“¦ Commandes Essentielles

### Development

```bash
# DÃ©marrer dev server
npx expo start

# Run iOS
npx expo start --ios

# Run Android
npx expo start --android

# Clear cache
npx expo start --clear

# Type check
npm run type-check

# Lint
npm run lint
npm run lint:fix

# Format
npm run format

# Tests
npm test
npm run test:watch
npm run test:coverage
```

### Build & Deploy

```bash
# Build development
eas build --profile development --platform all

# Build preview
eas build --profile preview --platform all

# Build production
eas build --profile production --platform all

# Submit to stores
eas submit --platform ios
eas submit --platform android

# OTA Update
eas update --branch production --message "Bug fixes"
```

---

## ğŸ— Architecture

### Layers

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   PRESENTATION (UI)         â”‚  <- app/, components/
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   APPLICATION (Logic)       â”‚  <- hooks/, stores/
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   DOMAIN (Business)         â”‚  <- types/, utils/
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   DATA (Services)           â”‚  <- services/
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Ã‰tat (State Management)

**Decision Tree**:
```
Data serveur? â†’ React Query
Ã‰tat global? â†’ Zustand
Persistance? â†’ MMKV
URL state? â†’ Expo Router params
Local state? â†’ useState
```

### Navigation (Expo Router)

**File-based routing**:
```
app/
â”œâ”€â”€ _layout.tsx              # Root layout
â”œâ”€â”€ (tabs)/                  # Tab navigation
â”‚   â”œâ”€â”€ _layout.tsx
â”‚   â”œâ”€â”€ index.tsx            # Home (/)
â”‚   â””â”€â”€ profile.tsx          # Profile (/profile)
â”œâ”€â”€ (auth)/                  # Auth group
â”‚   â”œâ”€â”€ login.tsx            # Login (/login)
â”‚   â””â”€â”€ register.tsx         # Register (/register)
â””â”€â”€ article/
    â””â”€â”€ [id].tsx            # Dynamic (/article/123)
```

---

## ğŸ“š Documentation ComplÃ¨te

### RÃ¨gles DÃ©taillÃ©es

1. [00-project-context.md.template](./rules/00-project-context.md.template) - Template contexte projet
2. [01-workflow-analysis.md](./rules/01-workflow-analysis.md) - Analyse obligatoire
3. [02-architecture.md](./rules/02-architecture.md) - Architecture React Native
4. [03-coding-standards.md](./rules/03-coding-standards.md) - Standards TypeScript
5. [04-solid-principles.md](./rules/04-solid-principles.md) - Principes SOLID
6. [05-kiss-dry-yagni.md](./rules/05-kiss-dry-yagni.md) - SimplicitÃ©
7. [06-tooling.md](./rules/06-tooling.md) - Outils (Expo, EAS)
8. [07-testing.md](./rules/07-testing.md) - Tests
9. [08-quality-tools.md](./rules/08-quality-tools.md) - ESLint, Prettier
10. [09-git-workflow.md](./rules/09-git-workflow.md) - Git & Conventional Commits
11. [10-documentation.md](./rules/10-documentation.md) - Documentation
12. [11-security.md](./rules/11-security.md) - SÃ©curitÃ©
13. [12-performance.md](./rules/12-performance.md) - Performance
14. [13-state-management.md](./rules/13-state-management.md) - State management
15. [14-navigation.md](./rules/14-navigation.md) - Navigation

### Templates

- [templates/screen.md](./templates/screen.md) - Template screen
- [templates/component.md](./templates/component.md) - Template composant
- [templates/hook.md](./templates/hook.md) - Template hook
- [templates/test-component.md](./templates/test-component.md) - Template test

### Checklists

- [checklists/pre-commit.md](./checklists/pre-commit.md) - Avant commit
- [checklists/new-feature.md](./checklists/new-feature.md) - Nouvelle feature
- [checklists/refactoring.md](./checklists/refactoring.md) - Refactoring
- [checklists/security.md](./checklists/security.md) - Audit sÃ©curitÃ©

---

## ğŸ”§ Configuration

### Environment Variables

```bash
# .env.development
EXPO_PUBLIC_API_URL={{DEV_API_URL}}
EXPO_PUBLIC_ENVIRONMENT=development

# .env.production
EXPO_PUBLIC_API_URL={{PROD_API_URL}}
EXPO_PUBLIC_ENVIRONMENT=production
```

### EAS Secrets

```bash
# Set secret
eas secret:create --name API_KEY --value "secret" --type string

# List secrets
eas secret:list
```

---

## âœ… Checklist Pre-Development

Avant de commencer Ã  coder:

- [ ] CLAUDE.md lu et compris
- [ ] RÃ¨gles fondamentales comprises
- [ ] Architecture du projet comprise
- [ ] Stack technique maÃ®trisÃ©e
- [ ] Environment setup complet
- [ ] AccÃ¨s aux services (API, etc.)
- [ ] Git workflow compris
- [ ] Conventional Commits compris

---

## ğŸš€ Workflow Type: Nouvelle Feature

### 1. Analyse (OBLIGATOIRE)
```bash
# Lire la rÃ¨gle
cat rules/01-workflow-analysis.md
```

**Ã‰tapes**:
1. Comprendre besoin
2. Analyser architecture
3. Identifier impacts
4. Concevoir solution
5. Planifier implÃ©mentation

### 2. Setup
```bash
# CrÃ©er branch
git checkout -b feature/feature-name

# CrÃ©er ticket/issue
```

### 3. Implementation (Bottom-Up)
```
1. Types (types/)
2. Services (services/)
3. Hooks (hooks/)
4. Components (components/)
5. Screens (app/)
6. Integration
```

### 4. Tests
```bash
# Unit tests
npm test

# Coverage
npm run test:coverage

# E2E
detox test
```

### 5. Quality
```bash
# Lint
npm run lint

# Type check
npm run type-check

# Format
npm run format
```

### 6. Review & Merge
```bash
# Create PR
gh pr create

# After approval
git checkout develop
git merge feature/feature-name
```

---

## ğŸ“Š MÃ©triques QualitÃ©

### Targets

- **Code Coverage**: > 80%
- **Bundle Size**: < 10MB
- **Startup Time**: < 3s
- **FPS**: 60 FPS constant
- **ESLint**: 0 errors
- **TypeScript**: 0 errors (strict)
- **npm audit**: 0 vulnerabilities

---

## ğŸ› Debugging

### React Native Debugger

```bash
# Install
brew install --cask react-native-debugger

# Run
open "rndebugger://set-debugger-loc?host=localhost&port=8081"
```

### Logs

```bash
# iOS logs
npx react-native log-ios

# Android logs
npx react-native log-android

# Expo logs
npx expo start
```

---

## ğŸ“ Support & Resources

### Documentation
- **Expo**: https://docs.expo.dev
- **React Native**: https://reactnative.dev
- **React Navigation**: https://reactnavigation.org
- **React Query**: https://tanstack.com/query

### Team
- **Tech Lead**: {{TECH_LEAD}}
- **Product Owner**: {{PRODUCT_OWNER}}
- **Backend Lead**: {{BACKEND_LEAD}}

### Communication
- **Slack**: {{SLACK_CHANNEL}}
- **JIRA**: {{JIRA_PROJECT}}

---

## ğŸ“ Pour Claude Code

### Instructions SpÃ©ciales

1. **TOUJOURS commencer par l'analyse** (rÃ¨gle #1)
2. **Respecter l'architecture** Ã©tablie
3. **Suivre les standards** de code
4. **Ã‰crire les tests** en mÃªme temps
5. **Documenter** le code (JSDoc)
6. **Commit atomiques** avec Conventional Commits
7. **Performance first** (60 FPS target)
8. **SÃ©curitÃ© by design**

### Approche RecommandÃ©e

```
Question/TÃ¢che reÃ§ue
    â†“
Analyser (rÃ¨gle 01)
    â†“
Concevoir
    â†“
ImplÃ©menter (bottom-up)
    â†“
Tester
    â†“
Documenter
    â†“
Commit
```

### Anti-Patterns Ã  Ã‰viter

âŒ Coder sans analyser
âŒ Modifier sans comprendre
âŒ Tests aprÃ¨s coup
âŒ Duplication de code
âŒ Inline functions/styles
âŒ any en TypeScript
âŒ console.log oubliÃ©s
âŒ Secrets dans code

### Patterns Ã  Suivre

âœ… Analyse avant code
âœ… Tests en parallÃ¨le
âœ… Code simple (KISS)
âœ… DRY (Don't Repeat Yourself)
âœ… SOLID principles
âœ… Type-safe (TypeScript)
âœ… Performance optimized
âœ… Security first

---

## ğŸ“ Notes Projet

### DÃ©cisions Architecture (ADRs)

{{ADR_NOTES}}

### Conventions SpÃ©cifiques

{{PROJECT_SPECIFIC_CONVENTIONS}}

### Known Issues

{{KNOWN_ISSUES}}

---

**Version**: 1.0.0
**DerniÃ¨re mise Ã  jour**: {{LAST_UPDATE}}
**Maintenu par**: {{MAINTAINER}}

---

**Remember**: Quality > Speed. Take time to analyze, design, then code properly.
